pipeline{
	agent none

	Stages {

		stage ('Compile'){
			agent { docker 'maven:3-alpine' }
			steps{

				withMaven (maven : 'maven_3.5.3'){

					sh 'mvn -B -DskipTests clean package

				}
			}

		}

		stage ('Testing'){
			agent { docker 'maven:3-alpine' }
			steps{

				withMaven (maven : 'maven_3.5.3'){

					sh 'mvn test'

				}
			}

		}

		stage ('Delivery'){
			agent { docker 'maven:3-alpine' }
			steps{

				withMaven (maven : 'maven_3.5.3'){

					sh './jenkins/scripts/deliver.sh'

				}
			}

		}

	}

}